@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>Welcome, Shivansh!</h2>
<p>Overview of your e-commerce store:</p>

<div class="cards">
    <div class="card" id="categ" data-link="/admin/category">
        <i class="fa-solid fa-tags"></i>
        <h3 id="totalcateg"></h3>
        <p>Categories</p>
    </div>
    <div class="card" data-link="/admin/product/">
        <i class="fa-solid fa-box"></i>
        <h3 id="totalprod"></h3>
        <p>Total Products</p>
    </div>
    
    <div class="card" data-link="/admin/users">
        <i class="fa-solid fa-user"></i>
        <h3 id="totaluser"></h3>
        <p>Total Users</p>
    </div>
    <div class="card" data-link="/BreachedProducts">
        <i class="fa-solid fa-triangle-exclamation"></i>
        <h3>5</h3>
        <p>Breached Products</p>
    </div>
    
    <div class="chart-section">
        <div class="chart-box">
            <h4>Revenue Overview</h4>
            <canvas id="revenueChart"></canvas>
        </div>

        <div class="chart-box">
            <h4>Orders & Sales Analytics</h4>
            <canvas id="ordersSalesChart"></canvas>
        </div>

        <div class="chart-box">
            <h4>Top Categories Performance</h4>
            <canvas id="categoryPerformanceChart"></canvas>
        </div>
    </div>

</div>

<style>
    .chart-section {
        display: flex;
        gap: 20px;
        margin-top: 30px;
        height:  350px;
    }

    .chart-box {
        flex: 1;
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        height: 350px; 
    }

        

    /* ✅ Media Query */
    @@media (max-width: 1200px) {

        .chart-section {
            flex-direction: column;
        }

        .chart-box {
            height: 300px; 
        }
    }
</style>
<script>
    $(document).ready(function () {

        $.ajax({
            url: '/api/AdminApi/dashcount',
            type: 'GET',
            headers: { "Authorization": "Bearer " + localStorage.getItem("token") },
            success: function (res) {

                $("#totaluser").text(res.totalUsers);
                $("#totalcateg").text(res.totalCategories);
                $("#totalprod").text(res.totalProducts);
            }
        });

    });

       
    document.addEventListener("DOMContentLoaded", function () {

        const revenueCtx = document.getElementById('revenueChart');

        new Chart(revenueCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Revenue ($)',
                    data: [5000, 8000, 6000, 9000, 12000, 15000],
                    borderColor: '#4e73df',
                    backgroundColor: 'rgba(78,115,223,0.1)',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 5,
                    pointBackgroundColor: '#4e73df'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                }
            }
        });


        
        const ordersSalesCtx = document.getElementById('ordersSalesChart');

        new Chart(ordersSalesCtx, {
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [
                    {
                        type: 'bar',
                        label: 'Orders',
                        data: [50, 75, 60, 90, 120, 150],
                        backgroundColor: '#1cc88a'
                    },
                    {
                        type: 'line',
                        label: 'Sales',
                        data: [4000, 7000, 5000, 8500, 11000, 14000],
                        borderColor: '#e74a3b',
                        backgroundColor: 'rgba(231,74,59,0.1)',
                        fill: false,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });
            
    const categoryPerformanceCtx = document.getElementById('categoryPerformanceChart');

    new Chart(categoryPerformanceCtx, {
        type: 'polarArea',
        data: {
            labels: ['Electronics', 'Fashion', 'Sports', 'Books', 'Home'],
            datasets: [{
                data: [35, 25, 20, 15, 30],
                backgroundColor: [
                    '#4e73df',
                    '#1cc88a',
                    '#36b9cc',
                    '#f6c23e',
                    '#e74a3b'
                ]
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });

    });



</script>